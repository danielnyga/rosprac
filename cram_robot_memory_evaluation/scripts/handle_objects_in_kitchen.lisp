#!/usr/bin/sbcl --script
(load #P"/opt/ros/indigo/share/roslisp/scripts/roslisp-sbcl-init")
(ros-load:load-system "cram_robot_memory_evaluation"  :cram-robot-memory-evaluation)
(if (not (or (and (= (length *posix-argv*) 4) (equal (nth 2 *posix-argv*) "train"))
             (and (= (length *posix-argv*) 3) (or (equal (nth 2 *posix-argv*) "complete")
                                                  (equal (nth 2 *posix-argv*) "complete")))))
    (print "Usage: handle_objects_in_kitchen <kitchen> <mode> [<extend existing>]")
    (cond ((equal (nth 2 *posix-argv*) "train")
           (cram-robot-memory-evaluation:execute-training
            (nth 1 *posix-argv*)
            (cond ((equal (nth 3 *posix-argv*) "true") t)
                  ((equal (nth 3 *posix-argv*) "false") nil)
                  (t (print "<extend existing> must be either true or false!")))))
          ((equal (nth 2 *posix-argv*) "complete")
           (cram-robot-memory-evaluation:execute-completion-test (nth 1 *posix-argv*)))
          ((equal (nth 2 *posix-argv*) "compare")
           (cram-robot-memory-evaluation:execute-comparison-test (nth 1 *posix-argv*)))))
